#!/bin/zsh

set -e

ROOT_DIRECTORY="$(dirname "$0")/.."

if ! command -v brew &> /dev/null; then
  echo "ðŸš€ Installing Homebrew"
  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
else
  echo "ðŸš€ Homebrew installed!"
fi

echo "ðŸš€ Installing Brewfile from $ROOT_DIRECTORY"

pwd
ls

BREWFILE="$ROOT_DIRECTORY/Brewfile"
echo "Brewfile contents:"
sed 's/^/  /' < "$BREWFILE"

brew bundle check "--file=$BREWFILE" || brew bundle install "--file=$BREWFILE"